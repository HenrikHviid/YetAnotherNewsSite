@model List<Article>

@{

    Layout = null;

}


<!DOCTYPE html>

<html>

<head>

    <meta name="viewport" content="width=device-width" />

    <title>Index</title>

    <!--<link href="~/Resource/bootstrap.min.css" rel="stylesheet" />-->

    <script src="~/js/jquery-1.7.1.min.js"></script>


</head>

<body>

    <div class="bg-primary m-1 p-1 text-white"><h4>User Details</h4></div>

    @foreach (var article in Model)
    {

        <a asp-controller="Article" asp-action="Index" asp-route-id="@article.Uuid.ToString()">
            <p><b>@article.Title</b></p>
            <img src="@article.Main_Image" width="800px" height="auto" />
        </a>
    }

    <div id="tblbody">

        <table class="table table-responsive table-striped table-bordered" id="tbldata">

            <thead>

                <tr>

                    <th></th>

                    <th></th>

                    <th></th>

                    <th></th>

                    <th></th>

                    <th></th>

                </tr>

            </thead>

            <tbody id="trow">

                @{

                    Html.RenderAction("table_row", "Home", new { Model = Model });

                }

            </tbody>

        </table>

        <div id="loadingdiv" style="text-align:center;display:none;margin-bottom:20px;">

            <img src="~/Resource/ajax-loader.gif" />

        </div>

    </div>

    @if (User?.Identity?.IsAuthenticated ?? false)
    {
        <a asp-controller="Account" asp-action="Logout"
           class="btn btn-danger">Logout</a>
    }

    <script>

        var pageindex = 2;

        var NoMoredata = false;

        var inProgress = false;

        $(window).scroll(function () {

            if ($(window).scrollTop() > Number($("#tblrow").height()) / 2 && !NoMoredata && !inProgress) {



                inProgress = true;

                $("#loadingdiv").show();

                $.post("@Url.Action("InfiniteScroll","Home")", { "pageindex": pageindex },

                    function (data) {

                        pageindex = pageindex + 1;

                        NoMoredata = data.NoMoredata;

                        $("#trow").append(data.HTMLString);

                        $("#loadingdiv").hide();

                        inProgress = false;

                    }

                    );

            }

        });

    </script>

</body>

</html>





